# Coding standards â€” code quality and structure.
#
# These apply specifically to application code generation
# (app-developer agent) and IaC generation (terraform/bicep agents).

domain: Coding Standards
category: principles
description: >-
  Code quality standards for generated application and infrastructure code.

principles:
  - id: CODE-001
    name: Meaningful Names
    description: >-
      Use descriptive, intention-revealing names for variables, functions,
      resources, and modules.  Avoid abbreviations unless they are
      universally understood (e.g., HTTP, URL, ID).
    applies_to:
      - terraform-agent
      - bicep-agent
      - app-developer
    examples:
      - "Use 'storage_account' not 'sa'; 'container_registry' not 'cr'"
      - "Use 'get_user_by_email()' not 'get_u()'"

  - id: CODE-002
    name: Small Functions
    description: >-
      Functions should be short and focused.  If a function exceeds
      roughly 30 lines, it likely does too much and should be split.
    applies_to:
      - app-developer
    examples:
      - "Split 'process_order()' into 'validate_order()', 'calculate_total()', 'save_order()'"

  - id: CODE-003
    name: Error Handling at Boundaries
    description: >-
      Handle errors at system boundaries (user input, external APIs,
      file I/O).  Internal code should trust its contracts.
    applies_to:
      - app-developer
    examples:
      - "Validate API request payloads at the controller layer, not in every function"
      - "Wrap external HTTP calls in try/except, not internal method calls"

  - id: CODE-004
    name: Consistent Module Structure
    description: >-
      Terraform modules should follow a consistent file layout:
      main.tf, variables.tf, outputs.tf, locals.tf, providers.tf.
      Bicep modules should separate parameters, resources, and outputs.
    applies_to:
      - terraform-agent
      - bicep-agent
    examples:
      - "Terraform: variables.tf for inputs, main.tf for resources, outputs.tf for outputs"
      - "Bicep: param block at top, resource declarations, output block at bottom"

  - id: CODE-005
    name: Parameterize, Don't Hard-Code
    description: >-
      All environment-specific values (names, regions, SKUs, IP ranges)
      must be parameterized via variables or parameters.  Never embed
      environment-specific values in resource definitions.
    applies_to:
      - terraform-agent
      - bicep-agent
      - app-developer
    examples:
      - "Terraform: use var.location not 'eastus' in resource blocks"
      - "Bicep: use param location string not 'eastus'"
      - "Application: use environment variables or config files, not inline strings"
